# ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –¥–ª—è –¥–µ–ø–ª–æ—è –Ω–∞ Emergent

## –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è Production

–ü—Ä–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –¥–µ–ø–ª–æ—è –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ Emergent, —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

### 1. üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (–ö–†–ò–¢–ò–ß–ù–û!)
```
MONGO_URL=mongodb+srv://bbeardy3_db_user:ccW9UMMYvz1sSpuJ@cluster0.zmmat7g.mongodb.net/telegram_shipping_bot?retryWrites=true&w=majority
```
**–í–∞–∂–Ω–æ:** –≠—Ç–æ MongoDB Atlas M10 –∫–ª–∞—Å—Ç–µ—Ä. –ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `mongodb://localhost:27017`!

### 2. üåê Webhook URL
```
WEBHOOK_BASE_URL=https://telegram-admin-fix-2.emergent.host
```
**–í–∞–∂–Ω–æ:** –î–æ–ª–∂–µ–Ω —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å URL –≤–∞—à–µ–≥–æ –¥–µ–ø–ª–æ—è!

### 3. ü§ñ Telegram Bot Token
```
TELEGRAM_BOT_TOKEN=8492458522:AAE3dLsl2blomb5WxP7w4S0bqvrs1M4WSsM
```

### 4. üîë Admin API Key
```
ADMIN_API_KEY=sk_admin_e19063c3f82f447ba4ccf49cd97dd9fd_2024
```

### 5. üì¶ ShipStation API Keys
```
SHIPSTATION_API_KEY=P9tNKoBVBHpcnq2riwwG4AG/SUG9sZVZaYSJ0alfG0g
SHIPSTATION_API_KEY_TEST=TEST_3NFykGjeVRke57QiCtJzEOq2ZVsXBrWgOvCNrwcwGU8
SHIPSTATION_API_KEY_PROD=P9tNKoBVBHpcnq2riwwG4AG/SUG9sZVZaYSJ0alfG0g
```

### 6. üí∞ Payment API Keys
```
OXAPAY_API_KEY=AIQ2XA-A4ASEL-5HTMND-6WJ2YK
CRYPTOBOT_TOKEN=480059:AA2YcX1suWsXPDHFXJMctgNNntwvug8TINJ
```

### 7. üë§ Admin & Channel
```
ADMIN_TELEGRAM_ID=7066790254
CHANNEL_ID=-1003417145879
CHANNEL_INVITE_LINK=https://t.me/WHITE_LABEL_SHIPPING_BOTCHANNEL
```

### 8. ‚öôÔ∏è Bot Configuration
```
BOT_ENVIRONMENT=production
BOT_MODE=webhook
```

---

## ‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã Emergent

### –ü—Ä–æ–±–ª–µ–º–∞: "–°–∫–ª–µ–π–∫–∞" –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ Emergent –∏–º–µ–µ—Ç –∏–∑–≤–µ—Å—Ç–Ω—ã–π –±–∞–≥, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –º–æ–≥—É—Ç "—Å–∫–ª–µ–∏–≤–∞—Ç—å—Å—è" –≤–º–µ—Å—Ç–µ, —Å–æ–∑–¥–∞–≤–∞—è –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è.

**–ü—Ä–∏–º–µ—Ä:**
```
MONGO_URL="value1"REACT_APP_BACKEND_URL="value2"
```

### –†–µ—à–µ–Ω–∏–µ (—É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ –∫–æ–¥–µ):

1. **–§–∞–π–ª workaround:** `/app/backend/config_production.py`
   - –°–æ–¥–µ—Ä–∂–∏—Ç "—á–∏—Å—Ç—ã–µ" –∑–Ω–∞—á–µ–Ω–∏—è –≤—Å–µ—Ö –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ fallback –µ—Å–ª–∏ ENV –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω—ã

2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–µ—Ç–µ–∫—Ü–∏—è:** `/app/backend/server.py` (—Å—Ç—Ä–æ–∫–∏ 14-55)
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–∞–∂–¥—É—é –∫—Ä–∏—Ç–∏—á–µ—Å–∫—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –Ω–∞ "—Å–∫–ª–µ–π–∫—É"
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `config_production.py` –µ—Å–ª–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞
   - –õ–æ–≥–∏—Ä—É–µ—Ç: `‚ö†Ô∏è Using production config for {key} (env var corrupted or missing)`

### –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ workaround —Ä–∞–±–æ—Ç–∞–µ—Ç:

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:
- ‚úÖ `Using env variable for MONGO_URL` - –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –Ω–æ—Ä–º–∞–ª—å–Ω–∞—è
- ‚ö†Ô∏è `Using production config for MONGO_URL` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è workaround

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ webhook
```bash
curl -s "https://api.telegram.org/bot<BOT_TOKEN>/getWebhookInfo" | jq
```

–î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:
```json
{
  "url": "https://telegram-admin-fix-2.emergent.host/api/telegram/webhook",
  "pending_update_count": 0
}
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ MongoDB –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
–û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start` –≤ –±–æ—Ç–µ. –ï—Å–ª–∏ –ø–æ–ª—É—á–∏–ª–∏ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç!

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ API
```bash
curl -H "Authorization: Bearer <ADMIN_API_KEY>" \
  https://telegram-admin-fix-2.emergent.host/api/stats
```

---

## üö® –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ /start

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –¥–µ–ø–ª–æ—è:**
- –ò—â–∏—Ç–µ: `‚ö†Ô∏è Using production config` - workaround —Å—Ä–∞–±–æ—Ç–∞–ª
- –ò—â–∏—Ç–µ: `‚úÖ Webhook set successfully` - webhook –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω
- –ò—â–∏—Ç–µ –æ—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ MongoDB

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
- ‚ùå MONGO_URL —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ localhost –≤–º–µ—Å—Ç–æ Atlas
- ‚ùå WEBHOOK_BASE_URL –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
- ‚ùå –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —Å–∫–ª–µ–∏–ª–∏—Å—å (–¥–æ–ª–∂–µ–Ω —Å—Ä–∞–±–æ—Ç–∞—Ç—å workaround)

### 2. –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "Failed to load data"

**–ü—Ä–∏—á–∏–Ω–∞:** –ü—Ä–æ–±–ª–µ–º–∞ —Å ADMIN_API_KEY –∏–ª–∏ CORS

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ ADMIN_API_KEY –≤ –¥–µ–ø–ª–æ–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –∫–ª—é—á–æ–º –≤ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ
- CORS —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ `*` –≤ `/app/backend/server.py`

---

## üìã –§–∏–Ω–∞–ª—å–Ω—ã–π —á–µ–∫–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º

- [ ] MONGO_URL —Å–æ–¥–µ—Ä–∂–∏—Ç Atlas URL (–Ω–µ localhost)
- [ ] WEBHOOK_BASE_URL —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç URL –¥–µ–ø–ª–æ—è
- [ ] –í—Å–µ API –∫–ª—é—á–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã
- [ ] BOT_MODE=webhook, BOT_ENVIRONMENT=production
- [ ] –§–∞–π–ª `config_production.py` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç (workaround –¥–ª—è –±–∞–≥–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã)
- [ ] –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è: –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫
- [ ] –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è: –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å `/start` –≤ –±–æ—Ç–µ
- [ ] –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è: –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 21.11.2025  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞:** Emergent (Kubernetes)

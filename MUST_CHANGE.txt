╔══════════════════════════════════════════════════════════════════════════╗
║             🔴 ЧТО ОБЯЗАТЕЛЬНО НУЖНО ИЗМЕНИТЬ ДЛЯ PRODUCTION             ║
╚══════════════════════════════════════════════════════════════════════════╝

┌──────────────────────────────────────────────────────────────────────────┐
│ 1. BOT_ENVIRONMENT                                                       │
├──────────────────────────────────────────────────────────────────────────┤
│ Было:    BOT_ENVIRONMENT="test"                                          │
│ Стало:   BOT_ENVIRONMENT="production"                                    │
└──────────────────────────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────────────────────────┐
│ 2. BOT_MODE                                                              │
├──────────────────────────────────────────────────────────────────────────┤
│ Было:    BOT_MODE="polling"                                              │
│ Стало:   BOT_MODE="webhook"                                              │
└──────────────────────────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────────────────────────┐
│ 3. WEBHOOK_BASE_URL                                                      │
├──────────────────────────────────────────────────────────────────────────┤
│ Было:    WEBHOOK_BASE_URL="https://telegram-admin-fix-2.preview..."     │
│ Стало:   WEBHOOK_BASE_URL="https://ваш-домен.com"                       │
│                                                                          │
│ ⚠️  ВАЖНО: Без HTTPS не будет работать!                                 │
└──────────────────────────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────────────────────────┐
│ 4. DB_NAME                                                               │
├──────────────────────────────────────────────────────────────────────────┤
│ Было:    DB_NAME="telegram_shipping_bot"                                 │
│ Стало:   DB_NAME="telegram_shipping_bot_production"                      │
└──────────────────────────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────────────────────────┐
│ 5. DB_NAME_PRODUCTION                                                    │
├──────────────────────────────────────────────────────────────────────────┤
│ Было:    DB_NAME_PRODUCTION="telegram_shipping_bot"                      │
│ Стало:   DB_NAME_PRODUCTION="telegram_shipping_bot_production"           │
└──────────────────────────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────────────────────────┐
│ 6. TELEGRAM_BOT_TOKEN (использовать Production токен)                   │
├──────────────────────────────────────────────────────────────────────────┤
│ Было:    TELEGRAM_BOT_TOKEN="8560388458:AAHxT..."  (test)               │
│ Стало:   TELEGRAM_BOT_TOKEN="8492458522:AAE3d..."  (prod)               │
└──────────────────────────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────────────────────────┐
│ 7. ADMIN_API_KEY (сгенерировать новый!)                                 │
├──────────────────────────────────────────────────────────────────────────┤
│ Генерация:                                                               │
│   openssl rand -hex 32                                                   │
│                                                                          │
│ Было:    ADMIN_API_KEY="sk_admin_e19063c3f82f447ba4ccf49cd97dd9fd_2024" │
│ Стало:   ADMIN_API_KEY="sk_admin_[ВСТАВИТЬ_РЕЗУЛЬТАТ]"                  │
└──────────────────────────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────────────────────────┐
│ 8. BOT_SIGNATURE_KEY (сгенерировать новый!)                             │
├──────────────────────────────────────────────────────────────────────────┤
│ Генерация:                                                               │
│   openssl rand -base64 32                                                │
│                                                                          │
│ Было:    BOT_SIGNATURE_KEY="VMxm-SuinMcpdSRQjEEZG8Mkekhj0pjRh73dzpZDvOM"│
│ Стало:   BOT_SIGNATURE_KEY="[ВСТАВИТЬ_РЕЗУЛЬТАТ]"                       │
└──────────────────────────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────────────────────────┐
│ 9. BOT_INSTANCE_ID (сгенерировать новый!)                               │
├──────────────────────────────────────────────────────────────────────────┤
│ Генерация:                                                               │
│   echo "production-$(date +%s)"                                          │
│                                                                          │
│ Было:    BOT_INSTANCE_ID="stale-button-fix"                             │
│ Стало:   BOT_INSTANCE_ID="production-1737321600"                         │
└──────────────────────────────────────────────────────────────────────────┘

╔══════════════════════════════════════════════════════════════════════════╗
║                      БЫСТРАЯ ГЕНЕРАЦИЯ ВСЕХ КЛЮЧЕЙ                       ║
╚══════════════════════════════════════════════════════════════════════════╝

Скопируйте и выполните эти команды:

┌──────────────────────────────────────────────────────────────────────────┐
│ echo "ADMIN_API_KEY=sk_admin_$(openssl rand -hex 32)"                   │
│ echo "BOT_SIGNATURE_KEY=$(openssl rand -base64 32)"                      │
│ echo "BOT_INSTANCE_ID=production-$(date +%s)"                            │
└──────────────────────────────────────────────────────────────────────────┘

Пример результата:
┌──────────────────────────────────────────────────────────────────────────┐
│ ADMIN_API_KEY=sk_admin_7a3f9c8e2d1b4a5f6c7d8e9f0a1b2c3d4e5f6a7b8c9d0... │
│ BOT_SIGNATURE_KEY=A8B7c6D5e4F3g2H1i0J9k8L7m6N5o4P3q2R1s0==               │
│ BOT_INSTANCE_ID=production-1737321600                                    │
└──────────────────────────────────────────────────────────────────────────┘

╔══════════════════════════════════════════════════════════════════════════╗
║                            ✅ ВСЁ ОСТАЛЬНОЕ                              ║
╚══════════════════════════════════════════════════════════════════════════╝

Все остальные параметры можно оставить как есть:
  ✅ MONGO_URL
  ✅ CORS_ORIGINS
  ✅ ADMIN_TELEGRAM_ID
  ✅ TEST_BOT_TOKEN
  ✅ TEST_BOT_USERNAME
  ✅ PROD_BOT_TOKEN
  ✅ PROD_BOT_USERNAME
  ✅ WEBHOOK_PATH
  ✅ CRYPTOBOT_TOKEN
  ✅ OXAPAY_API_KEY
  ✅ SHIPSTATION_API_KEY (если это Production ключ!)
  ✅ CHANNEL_ID
  ✅ CHANNEL_INVITE_LINK
  ✅ EMERGENT_LLM_KEY

╔══════════════════════════════════════════════════════════════════════════╗
║                       ПОСЛЕ ИЗМЕНЕНИЯ .env                               ║
╚══════════════════════════════════════════════════════════════════════════╝

1. Перезапустите бэкенд:
   sudo supervisorctl restart backend

2. Установите webhook (ПОСЛЕ ДЕПЛОЯ):
   curl -X POST https://ваш-домен.com/api/bot-config/set-webhook \
     -H "x-api-key: ваш_новый_admin_api_key" \
     -H "Content-Type: application/json" \
     -d '{"url": "https://ваш-домен.com/api/telegram/webhook"}'

3. Настройте Oxapay:
   Зайдите в https://oxapay.com -> Merchant Dashboard
   Callback URL: https://ваш-домен.com/api/oxapay/webhook

4. Проверьте:
   curl https://ваш-домен.com/api/bot/health

╔══════════════════════════════════════════════════════════════════════════╗
║                            📁 ФАЙЛЫ ПОМОЩИ                               ║
╚══════════════════════════════════════════════════════════════════════════╝

  📄 /app/PRODUCTION_ENV_TABLE.md      - Полная таблица всех параметров
  📄 /app/PRODUCTION_SETUP.md          - Подробная инструкция
  📄 /app/QUICK_COMMANDS.md            - Шпаргалка команд
  📄 /app/backend/.env.production      - Шаблон .env
  📄 /app/backend/.env.production.example - Готовый пример
  📄 /app/MUST_CHANGE.txt              - Этот файл

╚══════════════════════════════════════════════════════════════════════════╝
